const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BaseLayout-CdFsUpwo.js","assets/index-6Eoza2Ey.js","assets/frappe-ui-D0s9hLeI.js","assets/frappe-ui-Be2Kjakw.css","assets/index-DWr2fp0V.css","assets/notifications-BY1u9bzY.js","assets/CheckInPanel-C5HCl5wI.js","assets/CustomIonModal-YY5l0RNW.js","assets/EmployeeAdvanceBalance-Cv36lF6P.js","assets/EmployeeAdvanceItem-Cf3alrca.js","assets/workflow-B78wL7-d.js","assets/EmployeeAvatar-B6--jMMx.js","assets/EmployeeAdvanceIcon-cIcS4XrV.js","assets/ExpenseAdvancesTable-BnC-D1ee.js","assets/formatters-B67gliVk.js","assets/ExpenseClaimItem-BI5wdWv5.js","assets/ExpenseClaimSummary-DGZSUeky.js","assets/claims-Dm7B8wIH.js","assets/ExpenseItems-BjTlSYoT.js","assets/ExpenseTaxesTable-DH_HYGZp.js","assets/FormField-HYhAgVMZ.js","assets/Link-ByAo2phx.js","assets/ExpensesTable-CTrW7lnm.js","assets/WorkflowActionSheet-B_rv5dx0.js","assets/WorkflowActionSheet-CepcMqYJ.css","assets/FileUploaderView-DbIitR0G.js","assets/FileUploaderView-DrqnjYb4.css","assets/FormView-BgupmWP-.js","assets/FormattedField-CGcnurqi.js","assets/Holidays-mpcJfBAL.js","assets/LeaveBalance-BhiZNxNU.js","assets/SemicircleChart-BCgSfLL4.js","assets/leaves-B7m6AF6D.js","assets/LeaveRequestItem-BFNum4Sh.js","assets/ListFiltersActionSheet-1PfmmrXa.js","assets/ListView-a6XGFF0L.js","assets/TabButtons-CM2vCrkR.js","assets/realtime-D1OffVMM.js","assets/ProfileInfoModal-CMtZv2hR.js","assets/QuickLinks-VxafOngF.js","assets/RequestPanel-0_LqhnUt.js","assets/SalaryDetailTable-CztLbq5T.js","assets/SalarySlipItem-DL374kwK.js"])))=>i.map(i=>d[i]);
var ue=Object.defineProperty;var Z=Object.getOwnPropertySymbols;var de=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable;var ee=(n,e,s)=>e in n?ue(n,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[e]=s,te=(n,e)=>{for(var s in e||(e={}))de.call(e,s)&&ee(n,s,e[s]);if(Z)for(var s of Z(e))_e.call(e,s)&&ee(n,s,e[s]);return n};var S=(n,e,s)=>new Promise((u,w)=>{var E=m=>{try{a(s.next(m))}catch(x){w(x)}},V=m=>{try{a(s.throw(m))}catch(x){w(x)}},a=m=>m.done?u(m.value):Promise.resolve(m.value).then(E,V);a((s=s.apply(n,e)).next())});import{I as ae,m as oe}from"./index-6Eoza2Ey.js";import{E as ce,a2 as me,a as L,a3 as pe,O as F,c as q,a4 as fe,e as ve,f as P,q as i,j as r,k as f,x as b,K as B,l as p,t as h,F as O,H as j,I as ye,y as R,J as se,a5 as g,n as y,v as T,a6 as Ee,a7 as le,a8 as be,a9 as we,_ as t}from"./frappe-ui-D0s9hLeI.js";import xe from"./FormattedField-CGcnurqi.js";import{W as Ve,F as De}from"./WorkflowActionSheet-B_rv5dx0.js";import{g as Re,u as Te}from"./workflow-B78wL7-d.js";import{f as Le}from"./formatters-B67gliVk.js";const Ae=(n,e,s)=>{const u=n[e];return u?typeof u=="function"?u():Promise.resolve(u):new Promise((w,E)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(E.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==s?". Note that variables only represent file names one level deep.":""))))})},Ie=n=>(be("data-v-d5a02614"),n=n(),we(),n),ke={key:0,class:"bg-white w-full flex flex-col items-center justify-center pb-5 max-h-[calc(100vh-5rem)]"},he={class:"w-full flex flex-row gap-2 pt-8 pb-5 border-b justify-center items-center sticky top-0 z-[100]"},Pe={class:"text-gray-900 font-bold text-lg text-center"},ge={class:"w-full p-4 overflow-auto"},Oe={class:"flex flex-col items-center justify-center gap-5"},Ce={class:"text-gray-600 text-base"},Se={key:0,class:"flex flex-col gap-2 w-full"},Fe=Ie(()=>b("div",{class:"text-gray-600 text-base"},"Attachments",-1)),qe={class:"w-full flex flex-col items-center gap-2"},Be={class:"flex flex-row items-center justify-between text-gray-700 text-sm"},je=["onClick"],$e={key:1,class:"flex w-full flex-row items-center justify-between gap-3 sticky bottom-0 border-t z-[100] p-4"},Me={key:2,class:"flex w-full flex-row items-center justify-between gap-3 sticky bottom-0 border-t z-[100] p-4"},Ne={key:3,class:"flex w-full flex-row items-center justify-between gap-3 sticky bottom-0 border-t z-[100] p-4"},We={__name:"RequestActionSheet",props:{fields:{type:Array,required:!0},modelValue:{type:Object,required:!0}},setup(n){const e=n,s=me();let u=L(!1),w=L({}),E=L(null);function V(o){w.value=o,u.value=!0}const a=pe({doctype:e.modelValue.doctype,name:e.modelValue.name,auto:!0,onSuccess(o){m.reload()}}),m=F({url:"hrms.api.get_attachments",params:{dt:e.modelValue.doctype,dn:e.modelValue.name}}),x=F({url:"frappe.client.get_doc_permissions",params:{doctype:e.modelValue.doctype,docname:e.modelValue.name},auto:!0}),C=F({url:"hrms.api.get_permitted_fields_for_write",params:{doctype:e.modelValue.doctype},auto:!0});function D(o){var l,d;return o==="approval"?(l=C.data)==null?void 0:l.includes(A.value):(d=x.data)==null?void 0:d.permissions[o]}const v=q(()=>{var l,d,c;let o=(l=a==null?void 0:a.doc)==null?void 0:l.currency;return!o&&((d=a==null?void 0:a.doc)!=null&&d.company)&&(o=Re((c=a==null?void 0:a.doc)==null?void 0:c.company)),o}),$=q(()=>e.fields.filter(o=>{var l,d;return o.fieldtype==="Currency"?o.value=Le((l=a.doc)==null?void 0:l[o.fieldname],v.value):(o.fieldtype==="Table"&&(o.component=fe(()=>Ae(Object.assign({"./BaseLayout.vue":()=>t(()=>import("./BaseLayout-CdFsUpwo.js"),__vite__mapDeps([0,1,2,3,4,5])),"./BottomTabs.vue":()=>t(()=>import("./index-6Eoza2Ey.js").then(c=>c.O),__vite__mapDeps([1,2,3,4])),"./CheckInPanel.vue":()=>t(()=>import("./CheckInPanel-C5HCl5wI.js"),__vite__mapDeps([6,2,3,1,4])),"./CustomIonModal.vue":()=>t(()=>import("./CustomIonModal-YY5l0RNW.js"),__vite__mapDeps([7,1,2,3,4])),"./EmployeeAdvanceBalance.vue":()=>t(()=>import("./EmployeeAdvanceBalance-Cv36lF6P.js"),__vite__mapDeps([8,9,2,3,10,1,4,11,12])),"./EmployeeAdvanceItem.vue":()=>t(()=>import("./EmployeeAdvanceItem-Cf3alrca.js"),__vite__mapDeps([9,2,3,10,1,4,11,12])),"./EmployeeAvatar.vue":()=>t(()=>import("./EmployeeAvatar-B6--jMMx.js"),__vite__mapDeps([11,2,3,1,4])),"./EmptyState.vue":()=>t(()=>import("./index-6Eoza2Ey.js").then(c=>c.P),__vite__mapDeps([1,2,3,4])),"./ExpenseAdvancesTable.vue":()=>t(()=>import("./ExpenseAdvancesTable-BnC-D1ee.js"),__vite__mapDeps([13,2,3,10,1,4,14])),"./ExpenseClaimItem.vue":()=>t(()=>import("./ExpenseClaimItem-BI5wdWv5.js"),__vite__mapDeps([15,2,3,11,1,4,10,14])),"./ExpenseClaimSummary.vue":()=>t(()=>import("./ExpenseClaimSummary-DGZSUeky.js"),__vite__mapDeps([16,2,3,17,1,4,14])),"./ExpenseItems.vue":()=>t(()=>import("./ExpenseItems-BjTlSYoT.js"),__vite__mapDeps([18,10,2,3,1,4])),"./ExpenseTaxesTable.vue":()=>t(()=>import("./ExpenseTaxesTable-DH_HYGZp.js"),__vite__mapDeps([19,2,3,20,21,1,4,7,14])),"./ExpensesTable.vue":()=>t(()=>import("./ExpensesTable-CTrW7lnm.js"),__vite__mapDeps([22,2,3,20,21,1,4,7,17,14])),"./FilePreviewModal.vue":()=>t(()=>import("./WorkflowActionSheet-B_rv5dx0.js").then(c=>c.a),__vite__mapDeps([23,1,2,3,4,24])),"./FileUploaderView.vue":()=>t(()=>import("./FileUploaderView-DbIitR0G.js"),__vite__mapDeps([25,2,3,1,4,23,24,26])),"./FormField.vue":()=>t(()=>import("./FormField-HYhAgVMZ.js"),__vite__mapDeps([20,2,3,21])),"./FormView.vue":()=>t(()=>import("./FormView-BgupmWP-.js"),__vite__mapDeps([27,2,3,20,21,25,1,4,23,24,26,10,14])),"./FormattedField.vue":()=>t(()=>import("./FormattedField-CGcnurqi.js"),__vite__mapDeps([28,2,3,11,1,4])),"./Holidays.vue":()=>t(()=>import("./Holidays-mpcJfBAL.js"),__vite__mapDeps([29,1,2,3,4])),"./InstallPrompt.vue":()=>t(()=>import("./index-6Eoza2Ey.js").then(c=>c.N),__vite__mapDeps([1,2,3,4])),"./LeaveBalance.vue":()=>t(()=>import("./LeaveBalance-BhiZNxNU.js"),__vite__mapDeps([30,31,2,3,32,1,4])),"./LeaveRequestItem.vue":()=>t(()=>import("./LeaveRequestItem-BFNum4Sh.js"),__vite__mapDeps([33,2,3,11,1,4,32])),"./Link.vue":()=>t(()=>import("./Link-ByAo2phx.js"),__vite__mapDeps([21,2,3])),"./ListFiltersActionSheet.vue":()=>t(()=>import("./ListFiltersActionSheet-1PfmmrXa.js"),__vite__mapDeps([34,20,2,3,21])),"./ListView.vue":()=>t(()=>import("./ListView-a6XGFF0L.js"),__vite__mapDeps([35,2,3,1,4,36,33,11,32,15,10,14,9,12,34,20,21,7,37])),"./ProfileInfoModal.vue":()=>t(()=>import("./ProfileInfoModal-CMtZv2hR.js"),__vite__mapDeps([38,2,3,28,11,1,4])),"./QuickLinks.vue":()=>t(()=>import("./QuickLinks-VxafOngF.js"),__vite__mapDeps([39,2,3])),"./RequestList.vue":()=>t(()=>Promise.resolve().then(()=>Qe),void 0),"./RequestPanel.vue":()=>t(()=>import("./RequestPanel-0_LqhnUt.js"),__vite__mapDeps([40,36,2,3,32,1,4,17,33,11,15,10,14,37,28,23,24])),"./SalaryDetailTable.vue":()=>t(()=>import("./SalaryDetailTable-CztLbq5T.js"),__vite__mapDeps([41,1,2,3,4,14])),"./SalarySlipItem.vue":()=>t(()=>import("./SalarySlipItem-DL374kwK.js"),__vite__mapDeps([42,2,3,1,4,14])),"./SemicircleChart.vue":()=>t(()=>import("./SemicircleChart-BCgSfLL4.js"),__vite__mapDeps([31,2,3])),"./TabButtons.vue":()=>t(()=>import("./TabButtons-CM2vCrkR.js"),__vite__mapDeps([36,2,3])),"./WorkflowActionSheet.vue":()=>t(()=>import("./WorkflowActionSheet-B_rv5dx0.js").then(c=>c.b),__vite__mapDeps([23,1,2,3,4,24]))}),`./${o.componentName}.vue`,2))),o.value=((d=a==null?void 0:a.doc)==null?void 0:d[o.fieldname])||e.modelValue[o.fieldname]),o.value})),A=q(()=>e.modelValue.doctype==="Expense Claim"?"approval_status":"status"),ie=({status:o="",docstatus:l=0})=>{if(o)return`${o} successfully!`;if(l)return`Document ${l===1?"submitted":"cancelled"} successfully!`},ne=({status:o="",docstatus:l=0})=>{if(o)return`${o==="Approved"?"Approval":"Rejection"} failed!`;if(l)return`Document ${l===1?"submission":"cancellation"} failed!`},I=({status:o="",docstatus:l=0})=>{let d={};o&&(d[A.value]=o),l&&(d.docstatus=l),a.setValue.submit(te({},d),{onSuccess(){l!==0&&oe.dismiss(),le({title:"Success",text:ie({status:o,docstatus:l}),icon:"check-circle",position:"bottom-center",iconClasses:"text-green-500"})},onError(){le({title:"Error",text:ne({status:o,docstatus:l}),icon:"alert-circle",position:"bottom-center",iconClasses:"text-red-500"})}})},re=()=>{oe.dismiss(),s.push({name:`${e.modelValue.doctype.replace(/\s+/g,"")}DetailView`,params:{id:e.modelValue.name}})};return ve(()=>{E.value=Te(e.modelValue.doctype)}),(o,l)=>{var c,M,N,W,z,H,U,G,J,K,Q,X,Y;const d=P("Button");return(c=i(a))!=null&&c.doc?(r(),f("div",ke,[b("div",he,[b("span",Pe,B((M=i(a))==null?void 0:M.doctype),1),p(i(h),{name:"external-link",class:"h-4 w-4 text-gray-500 cursor-pointer",onClick:re})]),b("div",ge,[b("div",Oe,[(r(!0),f(O,null,j($.value,_=>{var k;return r(),f("div",{key:_.fieldname,class:ye([["Small Text","Text","Long Text","Table"].includes(_.fieldtype)?"flex-col":"flex-row items-center justify-between","flex w-full"])},[b("div",Ce,B(_.label),1),_.fieldtype==="Table"?(r(),R(se(_.component),{key:0,doc:(k=i(a))==null?void 0:k.doc},null,8,["doc"])):(r(),R(xe,{key:1,value:_.value,fieldtype:_.fieldtype,fieldname:_.fieldname},null,8,["value","fieldtype","fieldname"]))],2)}),128)),(W=(N=i(m))==null?void 0:N.data)!=null&&W.length?(r(),f("div",Se,[Fe,b("ul",qe,[(r(!0),f(O,null,j(i(m).data,(_,k)=>(r(),f("li",{class:"bg-gray-100 rounded p-2 w-full",key:k},[b("div",Be,[b("span",{class:"grow",onClick:Xe=>V(_)},B(_.file_name||_.name),9,je)])]))),128))])])):g("",!0)])]),(z=i(E))!=null&&z.hasWorkflow?(r(),R(Ve,{key:0,doc:i(a).doc,workflow:i(E),view:"actionSheet"},null,8,["doc","workflow"])):["Open","Draft"].includes((U=(H=i(a))==null?void 0:H.doc)==null?void 0:U[A.value])&&D("approval")?(r(),f("div",$e,[p(d,{onClick:l[0]||(l[0]=_=>I({status:"Rejected"})),class:"w-full py-5",variant:"subtle",theme:"red"},{prefix:y(()=>[p(i(h),{name:"x",class:"w-4"})]),default:y(()=>[T(" Reject ")]),_:1}),p(d,{onClick:l[1]||(l[1]=_=>I({status:"Approved"})),class:"w-full py-5",variant:"solid",theme:"green"},{prefix:y(()=>[p(i(h),{name:"check",class:"w-4"})]),default:y(()=>[T(" Approve ")]),_:1})])):((J=(G=i(a))==null?void 0:G.doc)==null?void 0:J.docstatus)===0&&["Approved","Rejected"].includes((Q=(K=i(a))==null?void 0:K.doc)==null?void 0:Q[A.value])&&D("submit")?(r(),f("div",Me,[p(d,{onClick:l[2]||(l[2]=_=>I({docstatus:1})),class:"w-full py-5",variant:"solid"},{default:y(()=>[T(" Submit ")]),_:1})])):((Y=(X=i(a))==null?void 0:X.doc)==null?void 0:Y.docstatus)===1&&D("cancel")?(r(),f("div",Ne,[p(d,{onClick:l[3]||(l[3]=_=>I({docstatus:2})),class:"w-full py-5",variant:"subtle",theme:"red"},{prefix:y(()=>[p(i(h),{name:"x",class:"w-4"})]),default:y(()=>[T(" Cancel ")]),_:1})])):g("",!0),p(i(ae),{ref:"modal","is-open":i(u),onDidDismiss:l[4]||(l[4]=_=>Ee(u)?u.value=!1:u=!1)},{default:y(()=>[p(De,{file:i(w)},null,8,["file"])]),_:1},8,["is-open"])])):g("",!0)}}},ze=ce(We,[["__scopeId","data-v-d5a02614"]]),He=[{fieldname:"name",label:"ID",fieldtype:"Data"},{fieldname:"leave_type",label:"Leave Type",fieldtype:"Link"},{fieldname:"leave_dates",label:"Leave Dates",fieldtype:"DateRange"},{fieldname:"half_day",label:"Half Day",fieldtype:"Check"},{fieldname:"half_day_date",label:"Half Day Date",fieldtype:"Date"},{fieldname:"total_leave_days",label:"Total Leave Days",fieldtype:"Float"},{fieldname:"employee",label:"Employee",fieldtype:"Link"},{fieldname:"leave_balance",label:"Leave Balance",fieldtype:"Float"},{fieldname:"status",label:"Status",fieldtype:"Select"},{fieldname:"description",label:"Reason",fieldtype:"Small Text"}],Ue=[{fieldname:"name",label:"ID",fieldtype:"Data"},{fieldname:"posting_date",label:"Posting Date",fieldtype:"Date"},{fieldname:"employee",label:"Employee",fieldtype:"Link"},{fieldname:"expenses",label:"Expenses",fieldtype:"Table",componentName:"ExpenseItems"},{fieldname:"total_claimed_amount",label:"Total Claimed Amount",fieldtype:"Currency"},{fieldname:"total_sanctioned_amount",label:"Total Sanctioned Amount",fieldtype:"Currency"},{fieldname:"total_taxes_and_charges",label:"Total Taxes and Charges",fieldtype:"Currency"},{fieldname:"total_advance_amount",label:"Total Advance Amount",fieldtype:"Currency"},{fieldname:"grand_total",label:"Grand Total",fieldtype:"Currency"},{fieldname:"status",label:"Status",fieldtype:"Select"},{fieldname:"approval_status",label:"Approval Status",fieldtype:"Select"}],Ge={key:0,class:"flex flex-col bg-white rounded mt-5 overflow-auto"},Je=["onClick"],Ke={__name:"RequestList",props:{component:{type:Object},items:{type:Array},teamRequests:{type:Boolean,default:!1},addListButton:{type:Boolean,default:!1},listButtonRoute:{type:String,default:""}},setup(n){const e=n,s=L(!1),u=L(null),w=V=>S(this,null,function*(){u.value=V,s.value=!0}),E=()=>S(this,null,function*(){s.value=!1,u.value=null});return(V,a)=>{var D;const m=P("Button"),x=P("router-link"),C=P("EmptyState");return r(),f(O,null,[(D=e.items)!=null&&D.length?(r(),f("div",Ge,[(r(!0),f(O,null,j(e.items,v=>(r(),f("div",{class:"flex flex-row p-3.5 items-center justify-between border-b cursor-pointer",key:v.name,onClick:$=>w(v)},[(r(),R(se(e.component||v.component),{doc:v,workflowStateField:v.workflow_state_field,isTeamRequest:e.teamRequests},null,8,["doc","workflowStateField","isTeamRequest"]))],8,Je))),128)),e.addListButton?(r(),R(x,{key:0,to:{name:e.listButtonRoute}},{default:y(({navigate:v})=>[p(m,{variant:"ghost",onClick:v,class:"w-full !text-gray-600 py-6 text-sm border-none bg-white hover:bg-white"},{default:y(()=>[T(" View List ")]),_:2},1032,["onClick"])]),_:1},8,["to"])):g("",!0)])):(r(),R(C,{key:1,message:"You have no requests"})),p(i(ae),{ref:"modal","is-open":s.value,onDidDismiss:E,"initial-breakpoint":1,breakpoints:[0,1]},{default:y(()=>[p(ze,{fields:u.value.doctype==="Leave Application"?i(He):i(Ue),modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=v=>u.value=v)},null,8,["fields","modelValue"])]),_:1},8,["is-open"])],64)}}},Qe=Object.freeze(Object.defineProperty({__proto__:null,default:Ke},Symbol.toStringTag,{value:"Module"}));export{Ke as _};
//# sourceMappingURL=RequestList-ByPO0yo0.js.map
