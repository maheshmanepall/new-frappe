import{a as i,c as b,O as h,w as V,j as k,y as q,q as u,I as x,ac as O,al as S}from"./frappe-ui-D0s9hLeI.js";const g={__name:"Link",props:{doctype:{type:String,required:!0},modelValue:{type:String,required:!1,default:""},filters:{type:Object,default:{}},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(l,{emit:m}){const a=l,f=m,y=i(null),r=i(""),d=b({get:()=>a.modelValue,set:t=>{f("update:modelValue",(t==null?void 0:t.value)||"")}}),s=h({url:"frappe.desk.search.search_link",params:{doctype:a.doctype,txt:r.value,filters:a.filters},method:"POST",transform:t=>t.map(e=>{var p,c;const o=(c=(p=e==null?void 0:e.description)==null?void 0:p.split(","))==null?void 0:c[0];return{label:o?`${o} : ${e.value}`:e.value,value:e.value}})}),n=t=>{s.update({params:{txt:t,doctype:a.doctype}}),s.reload()},v=S(t=>{const e=t||"";r.value!==e&&(r.val=e,n(e))},300);return V(()=>a.doctype,()=>{!a.doctype||a.doctype===s.doctype||n("")},{immediate:!0}),(t,e)=>(k(),q(u(O),{ref_key:"autocompleteRef",ref:y,size:"sm",modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=o=>d.value=o),placeholder:`Select ${l.doctype}`,options:u(s).data,class:x(l.disabled?"pointer-events-none":""),disabled:l.disabled,"onUpdate:query":u(v)},null,8,["modelValue","placeholder","options","class","disabled","onUpdate:query"]))}};export{g as default};
//# sourceMappingURL=Link-ByAo2phx.js.map
