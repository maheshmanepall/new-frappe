var w=(g,c,r)=>new Promise((m,a)=>{var o=i=>{try{u(r.next(i))}catch(e){a(e)}},p=i=>{try{u(r.throw(i))}catch(e){a(e)}},u=i=>i.done?m(i.value):Promise.resolve(i.value).then(o,p);u((r=r.apply(g,c)).next())});import{E as k,j as _,k as D,G as P,a as f,Q as x,y as L,n as d,q as t,i as H,l as s,x as l,af as v,Y as h,ag as b,X as V,v as y,D as C,K as B,a5 as j}from"./frappe-ui-D0s9hLeI.js";import{b as E,c as M}from"./index-6Eoza2Ey.js";const R={},U={xmlns:"http://www.w3.org/2000/svg",width:"117",height:"117",viewBox:"0 0 117 117",fill:"none"},$=P('<g clip-path="url(#clip0_0_45)"><path d="M93.4394 0H23.5606C10.5485 0 0 10.5485 0 23.5606V93.4394C0 106.452 10.5485 117 23.5606 117H93.4394C106.452 117 117 106.452 117 93.4394V23.5606C117 10.5485 106.452 0 93.4394 0Z" fill="#A1EEC9"></path><path d="M56.3316 68.0044C45.408 68.0044 36.4657 59.1156 36.4657 48.1385V46.425L47.068 46.5321L46.9609 48.1385C46.9609 53.279 51.1376 57.5092 56.3316 57.5092H60.6154C65.7559 57.5092 69.9861 53.3325 69.9861 48.1385V43.8547C69.9861 38.7142 65.8094 34.484 60.6154 34.484H36.3586L36.4657 23.8817L60.6154 23.9888C71.5389 23.9888 80.4813 32.8776 80.4813 43.8547V48.1385C80.4813 59.062 71.5925 68.0044 60.6154 68.0044H56.3316Z" fill="#0B313A"></path><path d="M32.1281 85.0856C39.4105 78.7135 48.7812 75.1258 58.5267 75.1258C68.2723 75.1258 77.643 78.7135 84.9254 85.2462L77.8572 93.0105C72.5025 88.2448 65.6485 85.621 58.5267 85.621C51.405 85.621 44.4974 88.2448 39.1428 93.064L32.1817 85.0856H32.1281Z" fill="#0B313A"></path></g><defs><clipPath id="clip0_0_45"><rect width="117" height="117" fill="white"></rect></clipPath></defs>',2),N=[$];function I(g,c){return _(),D("svg",U,N)}const S=k(R,[["render",I]]),A={class:"flex h-screen w-screen flex-col justify-center bg-white"},T={class:"flex flex-col mx-auto gap-3 items-center"},Z=l("div",{class:"text-3xl font-semibold text-gray-900 text-center"},"Login to Frappe HR",-1),F={class:"mx-auto mt-10 w-full px-8 sm:w-96"},G=l("h2",{class:"text-lg font-bold"},"Reset Password",-1),O=l("p",null,"Your password has expired. Please reset your password to continue",-1),Y=["href"],q=l("h2",{class:"text-lg font-bold"},"OTP Verification",-1),K={key:0,class:"mb-4"},J={__name:"Login",setup(g){const c=f(null),r=f(null),m=f(""),a=x({showDialog:!1,link:""}),o=x({showDialog:!1,tmp_id:"",code:"",verification:{}}),p=H("$session");function u(i){return w(this,null,function*(){try{let e;o.showDialog?e=yield p.otp(o.tmp_id,o.code):e=yield p.login(c.value,r.value),e.message==="Password Reset"?(a.showDialog=!0,a.link=e.redirect_to):(a.showDialog=!1,a.link=""),e.verification&&(e.verification.setup?(o.showDialog=!0,o.tmp_id=e.tmp_id,o.verification=e.verification):window.open("/login?redirect-to="+encodeURIComponent(window.location.pathname),"_blank"))}catch(e){m.value=e.messages.join(`
`)}})}return(i,e)=>(_(),L(t(M),null,{default:d(()=>[s(t(E),{class:"ion-padding"},{default:d(()=>[l("div",A,[l("div",T,[s(S,{class:"h-8 w-8"}),Z]),l("div",F,[l("form",{class:"flex flex-col space-y-4",onSubmit:v(u,["prevent"])},[s(t(h),{label:"Email",placeholder:"johndoe@mail.com",modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=n=>c.value=n),type:"text",autocomplete:"username"},null,8,["modelValue"]),s(t(h),{label:"Password",type:"password",placeholder:"••••••",modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=n=>r.value=n),autocomplete:"current-password"},null,8,["modelValue"]),s(t(b),{message:m.value},null,8,["message"]),s(t(V),{loading:t(p).login.loading,variant:"solid",class:"disabled:bg-gray-700 disabled:text-white !mt-6"},{default:d(()=>[y(" Login ")]),_:1},8,["loading"])],32)])]),s(t(C),{modelValue:a.showDialog,"onUpdate:modelValue":e[2]||(e[2]=n=>a.showDialog=n)},{"body-title":d(()=>[G]),"body-content":d(()=>[O]),actions:d(()=>[l("a",{class:"inline-flex items-center justify-center gap-2 transition-colors focus:outline-none text-white bg-gray-900 hover:bg-gray-800 active:bg-gray-700 focus-visible:ring focus-visible:ring-gray-400 h-7 text-base px-2 rounded",href:a.link,target:"_blank"}," Go to Reset Password page ",8,Y)]),_:1},8,["modelValue"]),s(t(C),{modelValue:o.showDialog,"onUpdate:modelValue":e[4]||(e[4]=n=>o.showDialog=n)},{"body-title":d(()=>[q]),"body-content":d(()=>[o.verification.prompt?(_(),D("p",K,B(o.verification.prompt),1)):j("",!0),l("form",{class:"flex flex-col space-y-4",onSubmit:v(u,["prevent"])},[s(t(h),{label:"OTP Code",type:"text",placeholder:"000000",modelValue:o.code,"onUpdate:modelValue":e[3]||(e[3]=n=>o.code=n),autocomplete:"one-time-code"},null,8,["modelValue"]),s(t(b),{message:m.value},null,8,["message"]),s(t(V),{loading:t(p).otp.loading,variant:"solid",class:"disabled:bg-gray-700 disabled:text-white !mt-6"},{default:d(()=>[y(" Verify ")]),_:1},8,["loading"])],32)]),_:1},8,["modelValue"])]),_:1})]),_:1}))}};export{J as default};
//# sourceMappingURL=Login-B1qj-WuG.js.map
